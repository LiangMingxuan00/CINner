---
title: "How to use Cancer Simulator"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{How to use Cancer Simulator}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  warning=FALSE, message=FALSE,
  comment = "#>"
)
```

```{r setup}
devtools::install_github("dinhngockhanh/CancerSimulator")


library(ggplot2)
library(signals)
library(dendextend)
library(fishplot)

library(CancerSimulator)

devtools::load_all()
devtools::document()
```

# Set up model variables
Cancer Simulator requires several csv files containing variables to set up the simulations. Here we detail how to easily build these files.

Let's give a name to the model.

```{r}
MODEL             <- 'EXPERIMENT-1'
```

## General variables for every cell
The first step is to specify the variables describing every cell during the process. The cells are assumed to have the same expected lifespan (regardless of their driver or CN profiles). The cell lifespan is always in days.

```{r}
cell_lifespan     <- 4
```

Next, we specify the times at the beginning and the end of the simulation. The unit can be `day`, `week`, `month` or `year`.

```{r}
T_0               <- list(1,'year')
T_end             <- list(10,'year')
```

An important variable is the size of CN bins. By default, this will be 500,000 bp.

```{r}
CN_bin_length     <- 500000
```

We have to set up the probability that each class of CN events occurs in a cell division. The local events (chromosome, chromosome-arm or focal level), if happening, will occur on a random eligible location.

```{r}
prob_CN_whole_genome_duplication    <- 1e-6
prob_CN_missegregation              <- 1e-6
prob_CN_chrom_arm_missegregation    <- 1e-6
prob_CN_focal_amplification         <- 1e-6
prob_CN_focal_deletion              <- 1e-6
prob_CN_cnloh_interstitial          <- 1e-6
prob_CN_cnloh_terminal              <- 1e-6
```



```{r}
BUILD_simulator_variables(model_name=MODEL,
                          cell_lifespan=cell_lifespan,
                          T_0=T_0,
                          T_end=T_end,
                          CN_bin_length=CN_bin_length,
                          prob_CN_whole_genome_duplication=prob_CN_whole_genome_duplication,
                          prob_CN_missegregation=prob_CN_missegregation,
                          prob_CN_chrom_arm_missegregation=prob_CN_chrom_arm_missegregation,
                          prob_CN_focal_amplification=prob_CN_focal_amplification,
                          prob_CN_focal_deletion=prob_CN_focal_deletion,
                          prob_CN_cnloh_interstitial=prob_CN_cnloh_interstitial,
                          prob_CN_cnloh_terminal=prob_CN_cnloh_terminal)
```
